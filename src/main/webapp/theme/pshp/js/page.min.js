/**
 * divId : 페이징 태그가 그려질 div
 * pageIndx : 현재 페이지 위치가 저장될 input 태그 id
 * recordCount : 페이지당 레코드 개수
 * totalcount : 전체 조회 회수
 * evnentName : 페이징 하단의 숫자 등의 버튼이 클릭 되었을떄 호출 될 함수이름
 */

var gfv_pageIndex = null;
var gfv_evnetName = null;
function gfn_renderPaging(params){
	var divId = params.divId;//페이징이 그려질 div
	gfv_pageIndex = params.pageIndex;//현재 위치가 저장될 input 태그
	var totalCount = params.totalCount;//전체 조회 건수
	var currentIndex = $("#"+params.pageIndx).val();//현재 위치
	if($("#"+params.pageIndex).length == 0 || gfn_isNull(currentIndex) == true){
		currentIndex = 1;
	}
	var recordCount = params.recordCount;
	if(gfn_isNull(recordCount) == true){
		recordCount = 5;
	}
	var totalIndexCount = Math.ceil(totalCount / recordCount);//전체 인덱스 수
	gfv_eventName = params.eventName;
	
	$("#"+divId).empty();
	var preStr= "";
	var postStr="";
	var str="";
	
	var first = (parseInt((currentIndex-1) / 10) * 10) + 1;
	var last = (parseInt(totalIndexCount/10) == parseInt(currentIndex/10)) ? totalIndexCount%10 : 10;
	var prev = (parseInt((currentIndex-1)/10)*10) - 9 > 0 ? (parseInt((currentIndex-1)/10)+1)*10+1 : totalIndexCount;
	var next = (parseInt((currentIndex-1)/10)+1) * 10 + 1 < totalIndexCount ? (parseInt((currentIndex-1)/10)+1) * 10 + 1 : totalIndexCount;
	
	if(totalIndexCount > 5){ //전체 인덱스가 5를 넘을 경우, 매앞, 앞 태그 작성
		preStr += "<a href='#this' class='prev col-xs-6 btn-page-prev' onclick='_movePage("+prev+")'>prev</a>";
		
	}
	else if(totalIndexCount <= 5 && totalIndexCount > 1){//전체 인덱스가 5 보다 작을경우}
		preStr += "<a href='#this' class='prev col-xs-6 btn-page-prev' onclick='_movePage("+next+")'>prev</a>";
	}
	if(totalIndexCount>5){
		postStr += "<a href='#this' class='next col-xs-6 btn-page-next' onclick='_movePage("+totalIndexCount+")'>next</a>";
	}
	else if(totalIndexCount <= 5 && totalIndexCount > 1){
		postStr += "<a href='#this' class='next col-xs-6 btn-page-next' onclick='_movePage("+totalIndexCount+")'>next</a>";
	}
	
	for(var i=first; i<(first+last); i++){
		if(i != currentIndex){
			str += "<div class='page-number col-xs-12'><a href='#this' style='font:9pt tahoma;' onclick='_movePage("+i+")'>"+i+"</a>";
		}
		else{
			str += "<div class='page_number col-xs-12'><a href='#this' class='active' onclick='_movePage("+i+")'>"+i+"</a>";
		}
	}
	$("#"+divId).append(preStr+str+postStr);
}

function _movePage(value){
	$("#"+gfv_pageIndex).val(value);
	if(typeof(gfv_eventName) == "function"){
		gfv_eventName(value);	
	}
	else{
		eval(gfv_eventName + "(value);");
	}
}